let selectElement=document.querySelectorAll(".custom-select"),arr_selects=Array.from(selectElement);arr_selects.forEach((function(item,i,arr){const btn=item.querySelector("button"),options=item.querySelector(".cs-options"),toggleMenu=function(){options.classList.toggle("opened")};btn.addEventListener("click",()=>{toggleMenu()}),document.addEventListener("click",(function(e){const target=e.target,current_sel=target==item||item.contains(target),sel_is_opened=options.classList.contains("opened");!current_sel&&sel_is_opened&&toggleMenu()}));let chboxChecked="",arrayChecked=[];if(item.classList.contains("single")){let div_radio=item.querySelectorAll(".radio"),arr_div_radio;Array.from(div_radio).forEach((function(item,i,arr){item.addEventListener("click",event=>{toggleNextlevel(item.nextElementSibling)})}));let inp_radio=item.querySelectorAll('input[type="radio"]'),arr_radio;Array.from(inp_radio).forEach((function(item,i,arr){item.addEventListener("change",event=>{singleChboxChange(item)}),item.addEventListener("click",event=>{event.stopPropagation()})}))}else{let div_chbox=item.querySelectorAll(".checkbox"),arr_div_chbox;Array.from(div_chbox).forEach((function(item,i,arr){item.addEventListener("click",event=>{toggleNextlevel(item.nextElementSibling)})}));let inp_chbox=item.querySelectorAll('input[type="checkbox"]'),arr_chbox;Array.from(inp_chbox).forEach((function(item,i,arr){item.addEventListener("change",event=>{chboxChange(item)}),item.addEventListener("click",event=>{event.stopPropagation()})}))}function singleChboxChange(el){chboxChecked=el.value,el.closest(".custom-select").querySelector("button").innerHTML=chboxChecked}function chboxChange(el){el.checked?arrayChecked.push(el.value):arrayChecked.splice(arrayChecked.indexOf(el.value),1),1==arrayChecked.length?el.closest(".custom-select").querySelector("button").innerHTML=arrayChecked:arrayChecked.length>1?el.closest(".custom-select").querySelector("button").innerHTML="Выбрано: "+arrayChecked.length:el.closest(".custom-select").querySelector("button").innerHTML="Не выбрано"}}));let searchEl=document.querySelectorAll(".search-in-list"),arr_search=Array.from(searchEl);function listSearch(elem){let phrase=elem.value.trim(),arr=elem.closest(".search-list").querySelectorAll(".search-item"),regPhrase=new RegExp(phrase,"i");if(console.log("phrase = "+phrase),0==phrase.length)for(let i=0;i<arr.length;i++)arr[i].classList.remove("overlap"),arr[i].classList.remove("diff");else{let flag=!1;for(let i=0;i<arr.length;i++)flag=regPhrase.test(arr[i].innerHTML),flag?arr[i].classList.add("overlap"):arr[i].classList.add("diff")}}arr_search.forEach((function(item,i,arr){item.addEventListener("keyup",event=>{listSearch(item)})}));